<!DOCTYPE html>
<html>
<head>
  <title>预算调整</title>
  <link rel="stylesheet" type="text/css" href="./layui/css/layui.css">
  <link rel="stylesheet" type="text/css" href="./pagecss.css">
  <link rel="shortcut icon" href="./img/sys/icon.ico" type="image/x-icon" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
   .layui-card-body{
    padding: 10px 25px;
   }
  </style>
</head>
<body>
<div class="navTab">
  <span class="layui-breadcrumb" lay-separator=">">
    <a href=""><i class="layui-icon layui-icon-home"></i></a>
    <a href="">一级分类</a>
    <a><cite>预算调整</cite></a>
  </span>
  <div class="rightDiv moreBtn">
  <span><i class="layui-icon layui-icon-left"></i></span>
  <span><i class="layui-icon layui-icon-refresh" id="refreshBtn"></i></span>
  </div>
</div>
<div class="hiddenScrool">
  <div>
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body" style="padding: 20px 15px;">
              <div>
                <div style="float: right;margin-top: -6px;">
                  <span class="layui-btn layui-btn- layui-btn-primary" id="successBtn"><i class="layui-icon layui-icon-ok-circle"></i>审批通过</span>
                  <span class="layui-btn layui-btn- layui-btn-primary" id="failBtn"><i class="layui-icon layui-icon-close-fill"></i>驳回审批</span>
                </div>
                <table>
                  <tr>
                    <td class="number">预算调整单号：TK2019032410001</td>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td class="stateTip"><span class="layui-badge-dot layui-bg-green"></span>&nbsp;已通过</td>
                  </tr>
                </table>
              </div>
              <div class="layui-card">
                <div class="layui-card-header auditDescription">
                  <i class="layui-icon layui-icon-spread-left"></i>&nbsp;&nbsp;审核说明
                </div>
                <div class="layui-card-body" style="padding: 0px !important;">
                  <textarea class="layui-textarea" placeholder="请输入审核信息" style="height: 130px;"></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-top:5px;">
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <p class="smallTitle"><span class="blueBlock">&nbsp;</span>处理进度组件</p>
              <div class="pointsRule2">
                <ul>
                    <li class="state">
                      <div>
                        <p class="state"><span class="create">创建</span></p>
                        <p class="icon"><i class="layui-icon layui-icon-username"></i></p>
                        <p class="name">李小明</p>
                        <p class="time">2019-03-15</p>
                      </div>
                    </li>
                    <li class="loading">
                      <div>
                        <span class="info">已等待12小时30分钟</span>
                        <span class="loads"><b class="full full50"></b></span>
                      </div>
                    </li>
                    <li class="state">
                      <div>
                        <p class="state"><span class="end">完结</span></p>
                        <p class="icon"><i class="layui-icon layui-icon-username"></i></p>
                        <p class="name">李小明</p>
                        <p class="time">待处理</p>
                      </div>
                    </li>
                    <li class="loading">
                      <div>
                        <span class="info">共耗时12小时30分钟</span>
                        <span class="loads"><b class="full full100"></b></span>
                      </div>
                    </li>
                    <li class="state">
                      <div>
                        <p class="state"><span class="">完结</span></p>
                        <p class="icon"><i class="layui-icon layui-icon-username"></i></p>
                        <p class="name">李小明</p>
                        <p class="time">2019-03-15</p>
                      </div>
                    </li>
                    <li class="loading">
                      <div>
                        <span class="info">已等待12小时30分钟</span>
                        <span class="loads"><b class="full"></b></span>
                      </div>
                    </li>
                    <li class="state">
                      <div>
                        <p class="state"><span class="red">归档</span></p>
                        <p class="icon"><i class="layui-icon layui-icon-username"></i></p>
                        <p class="name">李小明</p>
                        <p class="time">2019-03-15</p>
                      </div>
                    </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-top:5px;">
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <p class="smallTitle"><span class="blueBlock">&nbsp;</span>预算调整信息</p>
              <table class="searchTable layui-form">
                <tr>
                  <td><select><option value="">所属项目</option></select></td>
                  <td><select><option value="">预算年度</option></select></td>
                  <td><input type="text" placeholder="预算类别" class="layui-input"></td>
                  <td><input type="text" placeholder="预算子类别" class="layui-input"></td>
                  <td><input type="text" placeholder="当年预算总额" class="layui-input"></td>
                  <td><input type="text" placeholder="当年剩余预算总额" class="layui-input"></td>
                  <td><input type="text" placeholder="当月剩余预算" class="layui-input"></td>
                </tr>
              </table>
              <table id="tableData" lay-filter="tableData"></table>
              <div class="layui-card">
                <div class="layui-card-header auditDescription">
                  <i class="layui-icon layui-icon-spread-left"></i>&nbsp;&nbsp;其他信息
                </div>
                <div class="layui-card-body" style="padding: 0px !important;">
                  <textarea class="layui-textarea" placeholder="请输入备注信息" style="height: 130px;"></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-top:5px;">
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <p style="text-align: right;"><span class="layui-btn layui-btn-normal">提交确认</span>
                 <span class="layui-btn layui-btn-primary">取消返回</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
<script type="text/html" id="failTpl">
  <div class="addTable">
    <div class="layui-card">
      <div class="layui-card-body">
        <table>
          <tr>
            <td><p style="color: gray;">撤销审批，需要填写撤销原因</p></td>
          </tr>
          <tr>
            <td rowspan=""><textarea style="height: 220px" class="layui-textarea" placeholder="请填写撤销审批原因"></textarea></td>
          </tr>
        </table>
      </div>
    </div>
    <hr>
    <p class="btnP">
      <span class="layui-btn layui-btn-primary" id="closePage">取消</span>
      <span class="layui-btn layui-btn-normal">确定</span>
    </p>
  </div>
</script>
<script type="text/javascript" src="./layui/layui.js"></script>
<script type="text/javascript">
  layui.use(['jquery','layer','element','table'],function(){
    var $ = layui.jquery
    ,element = layui.element
    ,table = layui.table
    ,layer = layui.layer;

    var data = [
    {month:'一月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'二月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'三月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'四月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'五月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'六月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'七月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'八月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'九月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'十月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'十一月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    {month:'十二月：',yearBudget:'1000',surplusBudget:500,adjustBudget:200,adjustAfterBudget:100,description:''},
    ];
    table.render({
      elem: '#tableData',
      data: data,
      cols:[[
        {title:'月份/年度',field:'month',style:'background-color: #f2f2f2;',},
        {title:'年度预算',field:'yearBudget',},
        {title:'剩余预算',field:'surplusBudget',style:'background-color: #92f1559e;',},
        {title:'调整预算',field:'adjustBudget',style:'background-color: #1e9fffb8;',},
        {title:'调整后预算',field:'adjustAfterBudget',style:'background-color: #ffff0078;',},
        {title:'说明',field:'description',},
        {title:'操作',field:'',templet: getMoreTpl(), width:'12%',fixed:'right', },
      ]]
    })

    function getMoreTpl(){
      return function(d){
        return [
          '<span class="layui-btn layui-btn-xs layui-btn-normal"><i class="layui-icon layui-icon-edit"></i>编辑</span>',
          '<span class="layui-btn layui-btn-xs layui-btn-"><i class="layui-icon layui-icon-edit"></i>确认</span>',
        ].join(' ');
      }
    }

    $('#successBtn').click(function(){
      layer.msg('审批通过',{icon:1});
    })
    $('#failBtn').click(function(){
      var win = layer.open({
        type:1,
        offset:'100px',
        area:['500px','400px'],
        title:['撤销审批'].join(''),
        content:$('#failTpl').html(),
        success:function(){
          $('#closePage').unbind().on('click',function(){
            layer.close(win);
          })
        }
      })
    })
    $('#refreshBtn').click(function(){
      location.reload();
    })
  })
</script>
</html>