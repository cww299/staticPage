<!DOCTYPE html>
<html>
<head>
  <title>合同费用支出列表</title>
  <link rel="stylesheet" type="text/css" href="./layui/css/layui.css">
  <link rel="stylesheet" type="text/css" href="./pagecss.css">
  <link rel="shortcut icon" href="./img/sys/icon.ico" type="image/x-icon" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    .pointsRule ul li i {
      margin-top: -21px;
    }
    .number{
      font-size: 15px;
      font-weight: bold;
      color: gray;
    }
    .stateTip{
      color: gray;
      font-size: xx-small;
    }
    .contentTitle{
      font-weight: bold;
      color: gray;
      font-size: 15px;
      margin-bottom: 15px;
    }
    table.infoTable{
      width: 100%;
      color: gray;
    }
    table.infoTable td{
      border: 1px solid #80808054;
      padding: 5px;
      padding-left: 20px;
      text-align: left;
    }
    table.infoTable td.title{
      text-align: right;
      background: #f4f4f4;
      width: 130px;
      padding-right: 20px;
    }
    .description{
      color: gray;
      margin: 10px 0;
    }
    .peopleDate{
      text-align: right;
      margin-top: 10px;
      color: gray
    }
    .peopleDate span{
      margin-left: 55px;
    }
    a{
      color: blue;
    }
    table.infoTable td{
      width: 30%;
    }
    table.infoTable td.title{
      width: 160px;
    }
  </style>
</head>
<body>
<div class="navTab">
  <span class="layui-breadcrumb" lay-separator=">">
    <a href=""><i class="layui-icon layui-icon-home"></i></a>
    <a href="">一级分类</a>
    <a><cite>费用支出列表</cite></a>
  </span>
  <div class="rightDiv moreBtn">
  <span><i class="layui-icon layui-icon-left"></i></span>
  <span><i class="layui-icon layui-icon-refresh" id="refreshBtn"></i></span>
  </div>
</div>
<div class="hiddenScrool">
  <div>
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <div>
                <div style="float: right;">
                  <span class="layui-btn layui-btn-normal" id=""><i class="layui-icon layui-icon-add-1"></i>添加</span>
                  <span class="layui-btn layui-btn-primary" id=""><i class="layui-icon"></i>导出</span>
                </div>
                <table class="layui-form">
                  <tr>
                    <td><select lay-search><option value="">状态选择</option></select></td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="text" placeholder="检索客户名称" class="layui-input"></td>
                    <td>&nbsp;&nbsp;</td>
                    <td><input type="text" placeholder="检索合同编号" class="layui-input"></td>
                    <td>&nbsp;&nbsp;</td>
                    <td><span class="layui-btn layui-btn-normal"><i class="layui-icon layui-icon-search">查询</i></span></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-top:15px;">
    <div class="layui-container">
      <div class="layui-row">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-body">
              <div>
                <table id="tableData" lay-filter="tableData"></table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
<script type="text/html" id="auditTpl">
  <div class="addTable">
    <div class="layui-card">
      <div class="layui-card-body">
        <div class="pointsRule">
          <ul>
              <li class="finally"><a><span>提交审批</span><i></i></a></li>
              <li class="finally"><a><span>直属领导审批</span><i></i></a></li>
              <li class=""><a><span>园区总经理审批</span><i></i></a></li>
              <li class=""><a><span>审批完成</span></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="layui-card">
      <div class="layui-card-body">
        <p class="smallTitle"><span class="blueBlock">&nbsp;</span>基础信息</p>
        <table class="infoTable">
          <tr>
            <td class="title">所属项目：</td>
            <td>石景山</td>
            <td class="title">预算科目：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">合同编号：</td>
            <td></td>
            <td class="title">预算剩余金额：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">合同客户：</td>
            <td>北京维音软件有限公司</td>
            <td class="title">应付日期：</td>
            <td>2019-02-02</td>
          </tr>
          <tr>
            <td class="title">签署日期：</td>
            <td></td>
            <td class="title">应付金额：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">合同日期：</td>
            <td></td>
            <td class="title">第几期费用：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">合同总额：</td>
            <td></td>
            <td class="title">合同关键页上传：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">提交人员：</td>
            <td>罗涛</td>
            <td class="title">付款申请上传：</td>
            <td></td>
          </tr>
          <tr>
            <td class="title">提交时间：</td>
            <td>2019-04-01 17:27</td>
            <td class="title">费用发票上传：</td>
            <td></td>
          </tr>
          <tr>
            <td colspan="4">
              <textarea class="layui-textarea" style="height: 120px;" placeholder="备注说明"></textarea>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <hr>
    <div class="layui-card">
      <div class="layui-card-body">
        <p class="smallTitle"><span class="blueBlock">&nbsp;</span>合同欠费明细</p>
        <table id="zzTable" lay-filter="zzTable"></table>
         <p class="description">审核说明</p>
        <p>
          <textarea style="height: 120px" class="layui-textarea"></textarea>
        </p>
        <p class="peopleDate">
          <span>审核人：罗涛</span>
          <span>审核日期：2019-01-05 18:55</span>
        </p>
      </div>
    </div>
    <div class="layui-card">
      <div class="layui-card-body">
        <p class="contentTitle"><i class="layui-icon layui-icon-component"></i>&nbsp;&nbsp;审批动态</p>
        <ul class="layui-timeline">
          <li class="layui-timeline-item">
            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
            <div class="layui-timeline-content layui-text">
              <span></span>
             <!--  border-width: 8px;
              border-style: solid;
              border-color: transparent #56a3e1 transparent transparent; -->
              <h3 class="layui-timeline-title">2019-03-23 11:18</h3>
              <div class="timeContent">
                <p>
                  <span><i class="layui-icon layui-icon-username lineIcon"></i>李小明</span>
                  <span class="project">所属项目：北京石景山</span>
                  <span class="time"><i class="layui-icon layui-icon-log"></i>2019-03-11 22:31</span>
                </p>
                <p class="info">提交第一期回款 审批</p>
              </div>
            </div>
          </li>
          <li class="layui-timeline-item">
            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
            <div class="layui-timeline-content layui-text">
              <div class="timeContent">
                <p>
                  <span><i class="layui-icon layui-icon-username lineIcon"></i>李小明</span>
                  <span class="project">所属项目：北京石景山</span>
                  <span class="time"><i class="layui-icon layui-icon-log"></i>2019-03-11 22:31</span>
                </p>
                <p class="info">提交第一期回款 审批</p>
              </div>
            </div>
          </li>
          <li class="layui-timeline-item">
            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
            <div class="layui-timeline-content layui-text">
              <div class="timeContent">
                <p>
                  <span><i class="layui-icon layui-icon-username lineIcon"></i>李小明</span>
                  <span class="project">所属项目：北京石景山</span>
                  <span class="time"><i class="layui-icon layui-icon-log"></i>2019-03-11 22:31</span>
                </p>
                <p class="info">提交第一期回款 审批</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <hr>
    <p class="btnP">
      <span class="layui-btn layui-btn-normal">保存信息</span>
      <span class="layui-btn layui-btn-normal">提交审核</span>
      <span class="layui-btn layui-btn-primary" id="closePage">返回</span>
    </p>
  </div>
</script>
<script type="text/html" id="failTpl">
  <div class="addTable">
    <div class="layui-card">
      <div class="layui-card-body">
        <table>
          <tr>
            <td><p style="color: gray;">撤销审批，需要填写撤销原因</p></td>
          </tr>
          <tr>
            <td rowspan=""><textarea style="height: 220px" class="layui-textarea" placeholder="请填写撤销审批原因"></textarea></td>
          </tr>
        </table>
      </div>
    </div>
    <hr>
    <p class="btnP">
      <span class="layui-btn layui-btn-primary" id="closePage2">取消</span>
      <span class="layui-btn layui-btn-normal">确定</span>
    </p>
  </div>
</script>
<script type="text/javascript" src="./layui/layui.js"></script>
<script type="text/javascript">
  layui.use(['jquery','layer','element','table','form'],function(){
    var $ = layui.jquery
    ,table = layui.table
    ,form = layui.form
    ,element = layui.element
    ,layer = layui.layer;

    var data1 = [
      { state:'未付款',number:'1888888888',custome:'京微音软件有限公司',price:'100',date:'2019-08-01',price2:'',price3:'',},
      { state:'未付款',number:'1888888888',custome:'京微音软件有限公司',price:'100',date:'2019-08-01',price2:'',price3:'',},
      { state:'未付款',number:'1888888888',custome:'京微音软件有限公司',price:'100',date:'2019-08-01',price2:'',price3:'',},
    ];
    table.render({
      elem:'#tableData',
      data: data1,
      height:'610px',
      page:true,
      cols:[[
        {type:'checkbox',fixed:'left',},
        {title:'状态',field:'state',sort:true,},
        {title:'合同编号',field:'number',sort:true,},
        {title:'客户名称',field:'custome',sort:true,},
        {title:'合同金额',field:'price',sort:true,},
        {title:'应付日期',field:'date',sort:true,},
        {title:'付款金额',field:'price2',sort:true,},
        {title:'已付金额',field:'price3',sort:true,},
        {title:'操作',field:'',templet: getMoreTpl(), width:'25%',fixed:'right', },
      ]],
      done:function(){
        $('.audit').unbind().on('click',function(){
          var addProjectWin = layer.open({
            type:1,
            area:['1100px','100%'],
            move: false,
            title:['<i class="layui-icon layui-icon-spread-left"></i>&nbsp;&nbsp;费用支出：TK2019102022',
                    '<span class="layui-badge-dot layui-bg-blue"></span>&nbsp;待审批',
                    '<span class="headTips">',
                      '<span class="layui-btn layui-btn-sm layui-btn-primary" id="successBtn"><iclass="layui-icon layui-icon-ok-circle"></i>审批否决</span>',
                      '<span class="layui-btn layui-btn-sm layui-btn-primary" id="failBtn"><i class="layui-icon layui-icon-close-fill"></i>撤销审批</span>',
                      '&nbsp;&nbsp;<b class="red">*</b>为必填项',
                    '</span>'].join(''),
            content:$('#auditTpl').html(),
            success:function(){
              form.render();
              $('#closePage').unbind().on('click',function(){
                layer.close(addProjectWin);
              })
              $('#failBtn').click(function(){
                var win = layer.open({
                  type:1,
                  offset:'100px',
                  area:['500px','400px'],
                  title:['撤销审批'].join(''),
                  content:$('#failTpl').html(),
                  success:function(){
                    $('#closePage2').unbind().on('click',function(){
                      layer.close(win);
                    })
                  }
                })
              })
            }
          })
        })
      }
    })
    
    function getMoreTpl(){
      return function(d){
        return [
          '<span class="layui-btn layui-btn-xs layui-btn-normal"><i class="layui-icon layui-icon-about"></i>详细</span>',
          '<span class="layui-btn layui-btn-xs layui-btn-green"><i class="layui-icon layui-icon-edit"></i>编辑</span>',
          '<span class="layui-btn layui-btn-xs layui-btn-green"><i class="layui-icon layui-icon-edit"></i>发起申请</span>',
          '<span class="layui-btn layui-btn-xs layui-btn-danger audit"><i class="layui-icon layui-icon-delete" ></i>审批</span>',
        ].join(' ');
      }
    }
    $('#refreshBtn').click(function(){
      location.reload();
    })
  })
</script>
</html>